# Script to fix Hindi encoding issues in all Hindi pages

# Define Hindi translations for common terms
$hindiTranslations = @{
    # Common navigation
    "???" = "होम"
    "?????" = "टूल्स"
    "?????" = "ब्लॉग"
    "????? ???? ???" = "हमारे बारे में"
    "??????" = "संपर्क"
    "?????" = "हिंदी"
    
    # PDF Tools
    "PDF ?????" = "PDF टूल्स"
    "PDF ?????" = "PDF एडिटर"
    "PDF ????" = "PDF मर्ज"
    "???? ?? PDF" = "इमेज से PDF"
    "PDF ?????" = "PDF रोटेट"
    "PDF ??????? ???????????" = "PDF टेक्स्ट एक्सट्रैक्टर"
    "PDF ?? JPG" = "PDF से JPG"
    "PDF ?? ????" = "PDF से वर्ड"
    "PDF ?? ??????" = "PDF से एक्सेल"
    "PDF ????????" = "PDF स्प्लिटर"
    
    # Footer
    "SmileyPDF ?? ???? ???" = "SmileyPDF के बारे में"
    "????? ??????" = "त्वरित लिंक्स"
    "?????? ?? ??????" = "कानूनी व सहायता"
    "???????? ????" = "प्राइवेसी पॉलिसी"
    "???? ?? ??????" = "सेवा की शर्तें"
    "????? ?????" = "सहायता प्राप्त करें"
    "?? ???????? ?? ??? ????? ????" = "नए अपडेट्स के लिए साइन अप्प"
    "?????? PDF ????? ?? ????? ?? ??? ????? ?????????? ?? ??????? ????" = "नवीनतम PDF टूल्स के लॉन्च के बारे में सबसे पहले जानकारी पाएं"
    "???? ???? ???" = "आपका ईमेल पता"
    "??????? ???" = "सब्सक्राइब करें"
    "?? ???? ???????? ?? ?????? ???? ???? ???? ?? ??? ??????? ?????? ?????" = "हम आपकी प्राइवेसी का सम्मान करते हैं और कभी स्पैम नहीं भेजेंगे"
    "?????????? ?????????" = "सर्वाधिकार सुरक्षित"
    
    # PDF Splitter specific
    "?????? ??????" = "स्प्लिट विकल्प"
    "??????? ?? ??? ?????" = "निकालने के लिए पेजेस"
    "????? ???????? ??/?? ????? ???? ?? ????????? ?? ??? ???? ???? ?????" = "अलग पृष्ठों को/या पेज रेंज को अल्पविराम से अलग करके दर्ज करें"
    "??????" = "उदाहरण"
    "?????? ????" = "स्प्लिट मोड"
    "????? ??????? ?? ?? ?? PDF ??? ???????" = "चुने पृष्ठों को एक नई PDF में निकालें"
    "????? ??????? ?? ????? ?? ?? PDF ?????" = "चुने पृष्ठों को हटाकर नई PDF बनाएं"
    "???????? ????? ?? ??? PDF ??? ??????? ????" = "प्रत्येक पृष्ठ को अलग PDF में विभाजित करें"
    "?? N ??????? ?? ??? ??????? ????" = "हर N पृष्ठों के बाद विभाजित करें"
    "???????? PDF ??? ??????? ?? ??????" = "प्रत्येक PDF में पृष्ठों की संख्या"
    "PDF ??????? ????" = "PDF विभाजित करें"
    "PDF ??????? ?? ??? ??" = "PDF प्रोसेसिंग की जा रही है"
    "??????" = "परिणाम"
    "?? PDF ?? ??? ???? ????" = "नई PDF के साथ शुरू करें"
    "??????" = "त्रुटि"
    "PDF ??????? ???? ??? ?? ?????? ???? ????? ?????? ????? ?????" = "PDF प्रोसेसिंग करते समय एक समस्या हुई। कृपया दोबारा प्रयास करें।"
}

# Function to fix Hindi encoding in a file
function Fix-HindiEncoding {
    param (
        [string]$filePath
    )
    
    Write-Host "Processing $filePath..."
    
    # Read the file content
    $content = Get-Content -Path $filePath -Raw -Encoding UTF8
    
    # Replace question marks with proper Hindi text
    foreach ($key in $hindiTranslations.Keys) {
        if ($content -match [regex]::Escape($key)) {
            $content = $content -replace [regex]::Escape($key), $hindiTranslations[$key]
        }
    }
    
    # Save the file with UTF-8 encoding
    $utf8WithoutBom = New-Object System.Text.UTF8Encoding $false
    [System.IO.File]::WriteAllText($filePath, $content, $utf8WithoutBom)
    
    Write-Host "Fixed encoding in $filePath"
}

# Process all Hindi HTML files
$hindiFiles = Get-ChildItem -Path "hi" -Filter "*.html" -Recurse
Write-Host "Found $($hindiFiles.Count) Hindi HTML files to process."

foreach ($file in $hindiFiles) {
    Fix-HindiEncoding -filePath $file.FullName
}

Write-Host "Hindi encoding fixed in all files!"
