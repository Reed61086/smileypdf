# Script to fix Hindi encoding issues in all Hindi pages

# Function to replace question marks with proper Hindi text
function Fix-HindiEncoding {
    param (
        [string]$filePath
    )
    
    Write-Host "Processing $filePath..."
    
    # Read the file content
    $content = Get-Content -Path $filePath -Raw -Encoding UTF8
    
    # Common Hindi replacements
    $replacements = @{
        # Navigation
        "???" = "होम"
        "?????" = "टूल्स"
        "?????" = "ब्लॉग"
        "????? ???? ???" = "हमारे बारे में"
        "??????" = "संपर्क"
        "?????" = "हिंदी"
        "???? ?????" = "मेनू खोलें"
        
        # PDF Tools
        "PDF ?????" = "PDF टूल्स"
        "????? ?????" = "पीडीएफ टूल्स"
        "PDF ?????" = "PDF एडिटर"
        "PDF ????" = "PDF मर्ज"
        "???? ?? PDF" = "इमेज से PDF"
        "PDF ?????" = "PDF रोटेट"
        "PDF ??????" = "PDF रोटेटर"
        "PDF ??????? ???????????" = "PDF टेक्स्ट एक्सट्रैक्टर"
        "PDF ?? JPG" = "PDF से JPG"
        "PDF ?? ????" = "PDF से वर्ड"
        "PDF ?? ??????" = "PDF से एक्सेल"
        "PDF ????????" = "PDF स्प्लिटर"
        
        # Common UI elements
        "??????" = "अपलोड"
        "???????" = "डाउनलोड"
        "???????" = "प्रोसेस"
        "??????..." = "प्रोसेसिंग..."
        "???? ??????" = "फाइल चुनें"
        "???? ?????", "फाइल चुनें"
        "???? ?? ????? ??? ???? ?? ???? ??? ??????" = "फाइल को चुनने के लिए या यहां ड्रैग करें"
        "??????? ???? ????" = "अधिकतम फाइल साइज"
        "?????? ???? ?????" = "अधिकतम फाइल साइज"
        
        # Footer
        "SmileyPDF ?? ???? ???" = "SmileyPDF के बारे में"
        "????? ??????" = "त्वरित लिंक्स"
        "?????? ????" = "त्वरित लिंक"
        "?????? ?? ??????" = "कानूनी व सहायता"
        "??????" = "कानूनी"
        "???????? ????" = "प्राइवेसी पॉलिसी"
        "????????? ??????" = "प्राइवेसी पॉलिसी"
        "???? ?? ??????" = "सेवा की शर्तें"
        "?????? ?? ??????" = "सेवा की शर्तें"
        "????? ?????" = "सहायता प्राप्त करें"
        "?? ???????? ?? ??? ????? ????" = "नए अपडेट्स के लिए साइन अप्प"
        "?????? PDF ????? ?? ????? ?? ??? ????? ?????????? ?? ??????? ????" = "नवीनतम PDF टूल्स के लॉन्च के बारे में सबसे पहले जानकारी पाएं"
        "???? ???? ???" = "आपका ईमेल पता"
        "??????? ???" = "सब्सक्राइब करें"
        "?? ???? ???????? ?? ?????? ???? ???? ???? ?? ??? ??????? ?????? ?????" = "हम आपकी प्राइवेसी का सम्मान करते हैं और कभी स्पैम नहीं भेजेंगे"
        "?????????? ?????????" = "सर्वाधिकार सुरक्षित"
        
        # Common phrases
        "???????? ???? ???!" = "कन्वर्ट हो गया है!"
        "??? ??? ?? ???!" = "कुछ गड़बड़ हो गई!"
        "?????? ????? ????" = "दोबारा प्रयास करें"
        "????? ???? ??????? ????" = "दूसरी फाइल कन्वर्ट करें"
        "???? ?????? ???????? ???? ??? ?????? ???? ???????? ??? ?? ??????? ?? ???? ??? ?? ????? ????? ?? ??? ????? ???? ???? ????" = "आपकी फाइलें सुरक्षित रहती हैं क्योंकि सभी प्रोसेसिंग आपके ब्राउजर में ही होती है और कोई फाइल हमारे सर्वर पर अपलोड नहीं होती हैं"
        "???? ???? ?? ??????? ???? ??? ?? ?????? ???? ????? ?????? ????? ???? ?? ????? ???? ?? ????? ?????" = "आपकी फाइल को कन्वर्ट करते समय एक समस्या हुई। कृपया दोबारा प्रयास करें या दूसरी फाइल के साथ कोशिश करें"
    }
    
    # Replace each pattern with its Hindi equivalent
    foreach ($key in $replacements.Keys) {
        if ($content -match [regex]::Escape($key)) {
            $content = $content -replace [regex]::Escape($key), $replacements[$key]
        }
    }
    
    # Replace any remaining question mark sequences with a placeholder
    $content = $content -replace "(\?{3,})", "[हिंदी_टेक्स्ट]"
    
    # Save the file with UTF-8 encoding
    $utf8WithoutBom = New-Object System.Text.UTF8Encoding $false
    [System.IO.File]::WriteAllText($filePath, $content, $utf8WithoutBom)
    
    Write-Host "Fixed encoding in $filePath"
}

# Process all Hindi HTML files
$hindiFiles = Get-ChildItem -Path "hi" -Filter "*.html" -Recurse
Write-Host "Found $($hindiFiles.Count) Hindi HTML files to process."

foreach ($file in $hindiFiles) {
    Fix-HindiEncoding -filePath $file.FullName
}

Write-Host "Hindi encoding fixed in all files!"
