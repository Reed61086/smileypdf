# Script to fix Hindi encoding issues in all Hindi pages

# Define Hindi translations for common terms
$hindiTranslations = @{
    # Page titles and headers
    "???? ????? ?? ??? ?????? PDF ??????" = "मुफ्त ऑनलाइन और वेब आधारित PDF टूल्स"
    "???? ????????? ??? ???? ???? PDF ?????? ?? ????? ?? ??????? ????, ???? ????, ??????? ????" = "हमारे वेबसाइट पर आप अपने PDF फाइलों को आसानी से एडिट करें, मर्ज करें, स्प्लिट करें"
    "????? ???? ?? ??????? ???????? ??? ????-?? ????, ??? ????????? ??????? ????!" = "बिना किसी के डाउनलोड किएबिना और बिना-एड वाले, सभी प्रोसेसिंग ब्राउजर में!"
    "100% ????? ?? ???????? ???????-???? ???????????" = "100% मुफ्त और सुरक्षित क्लाइंट-साइड प्रोसेसिंग"
    
    # Navigation
    "???" = "होम"
    "?????" = "टूल्स"
    "?????" = "ब्लॉग"
    "????? ???? ???" = "हमारे बारे में"
    "??????" = "संपर्क"
    "?????" = "हिंदी"
    "???? ?????" = "मेनू खोलें"
    
    # PDF Tools
    "PDF ?????" = "PDF टूल्स"
    "PDF ?????" = "PDF एडिटर"
    "PDF ????" = "PDF मर्ज"
    "???? ?? PDF" = "इमेज से PDF"
    "PDF ?????" = "PDF रोटेट"
    "PDF ??????? ???????????" = "PDF टेक्स्ट एक्सट्रैक्टर"
    "PDF ?? JPG" = "PDF से JPG"
    "PDF ?? ????" = "PDF से वर्ड"
    "PDF ?? ??????" = "PDF से एक्सेल"
    "PDF ????????" = "PDF स्प्लिटर"
    
    # Tool descriptions
    "PDF ??????? ????" = "PDF एडिटर टूल"
    "PDF ???? ????" = "PDF मर्ज टूल"
    "???? ?? PDF" = "इमेज से PDF"
    "PDF ????????" = "PDF स्प्लिटर"
    
    # Buttons and actions
    "??????" = "अपलोड"
    "???????" = "डाउनलोड"
    "???????" = "प्रोसेस"
    "??????..." = "प्रोसेसिंग..."
    "???? ??????" = "फाइल चुनें"
    "???? ?? ????? ??? ???? ?? ???? ??? ??????" = "फाइल को चुनने के लिए या यहां ड्रैग करें"
    "??????? ???? ????" = "अधिकतम फाइल साइज"
    
    # Footer
    "SmileyPDF ?? ???? ???" = "SmileyPDF के बारे में"
    "SmileyPDF ????? ????? PDF ????? ????? ???? ?? ?? ???? ????????? ?? ??????? ?? ??? ??? ???? ????" = "SmileyPDF मुफ्त ऑनलाइन PDF टूल्स प्रदान करता है जो आपके दस्तावेजों को कुशलतापूर्वक प्रबंधित करने में मदद करते हैं"
    "????? ????? ????? ?? ????, ??????, ?? ???? ?? ???????? ???? ?? ??? ????? ??? ???" = "हमारे टूल्स उपयोग में आसान, सुरक्षित, और किसी भी डिवाइस से एक्सेसिबल होने के लिए डिज़ाइन किए गए हैं"
    "???????" = "लोकप्रिय"
    "??????" = "कानूनी"
    "????? ????" = "अपडेट रहें"
    "???? ????" = "आपका ईमेल"
    "????????" = "सब्सक्राइब"
    "???? ??????" = "हमसे संपर्क"
    "???? ?? ????????? ??? ????? ???? ????? ????!" = "सवाल या प्रतिक्रिया है? हमें सुनना पसंद करेंगे!"
    
    # Common phrases
    "PDF ??????" = "PDF प्रीव्यू"
    "????? ??????" = "स्प्लिट विकल्प"
    "??????? ?? ??? ??? ???? ?? ????? ??? ????" = "निकालने के लिए पेज नंबर या रेंज दर्ज करें"
    "PDF ?????" = "PDF स्प्लिट"
    "??? ??? ????? ?? ???? ?? ??? ??? ?? ????? ?? ?????? ?? ????????? ????" = "अलग-अलग पेजों को कॉमा से अलग करें और रेंज को हाइफन से निर्दिष्ट करें"
    "?????????..." = "प्रोसेसिंग..."
    "??????" = "परिणाम"
    
    # Tool instructions
    "???? ?? PDF ???? ????? ???? ?????" = "किसी भी PDF फाइल ऑनलाइन स्प्लिट करें"
    "????? ????? PDF ??????? ??? ???? ???? ???? PDF ????????? ?? ?????? ??? ????? ??????? ?? ??? ???? ??" = "हमारा मुफ्त PDF स्प्लिटर टूल आपको अपने PDF दस्तावेजों से विशिष्ट पेज निकालने की अनुमति देता है"
    "??? ?? ?-??? ?? ?????? ??? ????, ?????? ?? ?????? ????? ??????? ?? ???????? ??, ?? ???? ??? ??? ????????? ?? ??? ??? ????? ??? ?????, ????? ??? ??? ????? ?? ???? ????? ??" = "चाहे आप ई-बुक से अध्याय अलग करने की आवश्यकता हो, रिपोर्ट से विशिष्ट खंडों को निकालने की आवश्यकता हो, या स्कैन किए गए दस्तावेज़ को अलग-अलग पेजों में विभाजित करने की आवश्यकता हो, हमारा टूल इसे त्वरित और आसान बनाता है"
}

# Function to fix Hindi encoding in a file
function Fix-HindiEncoding {
    param (
        [string]$filePath
    )
    
    Write-Host "Processing $filePath..."
    
    # Read the file content
    $content = Get-Content -Path $filePath -Raw -Encoding UTF8
    
    # Replace question marks with proper Hindi text
    foreach ($key in $hindiTranslations.Keys) {
        if ($content -match [regex]::Escape($key)) {
            $content = $content -replace [regex]::Escape($key), $hindiTranslations[$key]
        }
    }
    
    # Save the file with UTF-8 encoding
    $utf8WithoutBom = New-Object System.Text.UTF8Encoding $false
    [System.IO.File]::WriteAllText($filePath, $content, $utf8WithoutBom)
    
    Write-Host "Fixed encoding in $filePath"
}

# Process all Hindi HTML files
$hindiFiles = Get-ChildItem -Path "hi" -Filter "*.html" -Recurse
Write-Host "Found $($hindiFiles.Count) Hindi HTML files to process."

foreach ($file in $hindiFiles) {
    Fix-HindiEncoding -filePath $file.FullName
}

Write-Host "Hindi encoding fixed in all files!"

# Additional specific fixes for the main page
$mainHindiPage = "hi/index.html"
if (Test-Path $mainHindiPage) {
    Write-Host "Applying specific fixes to main Hindi page..."
    
    $content = Get-Content -Path $mainHindiPage -Raw -Encoding UTF8
    
    # Fix main heading
    $content = $content -replace '<h1 class="text-4xl md:text-5xl font-bold text-center mb-4">???? ????? ?? ??? ?????? PDF ??????</h1>', 
                               '<h1 class="text-4xl md:text-5xl font-bold text-center mb-4">मुफ्त ऑनलाइन और वेब आधारित PDF टूल्स</h1>'
    
    # Fix subheading
    $content = $content -replace '<p class="text-xl text-center text-gray-600 mb-8">???? ????????? ??? ???? ???? PDF ?????? ?? ????? ?? ??????? ????, ???? ????, ??????? ????,<br>????? ???? ?? ??????? ???????? ??? ????-?? ????, ??? ????????? ??????? ????!</p>', 
                               '<p class="text-xl text-center text-gray-600 mb-8">हमारे वेबसाइट पर आप अपने PDF फाइलों को आसानी से एडिट करें, मर्ज करें, स्प्लिट करें,<br>बिना किसी के डाउनलोड किएबिना और बिना-एड वाले, सभी प्रोसेसिंग ब्राउजर में!</p>'
    
    # Fix tool buttons
    $content = $content -replace '<span class="block font-medium">PDF ??????? ????</span>', 
                               '<span class="block font-medium">PDF एडिटर टूल</span>'
    
    $content = $content -replace '<span class="block font-medium">PDF ???? ????</span>', 
                               '<span class="block font-medium">PDF मर्ज टूल</span>'
    
    $content = $content -replace '<span class="block font-medium">???? ?? PDF</span>', 
                               '<span class="block font-medium">इमेज से PDF</span>'
    
    # Save the file with UTF-8 encoding
    $utf8WithoutBom = New-Object System.Text.UTF8Encoding $false
    [System.IO.File]::WriteAllText($mainHindiPage, $content, $utf8WithoutBom)
    
    Write-Host "Specific fixes applied to main Hindi page."
}

Write-Host "All Hindi pages have been fixed!"
